!function(s){function r(){for(var r="",e=document.querySelectorAll('script[type="text/php"]'),t=0;t<e.length;t++)e[t].src?r+=n(e[t]):r+=e[t].textContent+";";console.log(r);i(r);function n(r){var e=o(r.src);if(!(e instanceof Error))return e+";"}}function o(r){var e=new XMLHttpRequest;return e.open("GET",r,!1),e.send(),200!=e.status?(console.error("Can't get file: "+r),new Error("Can't get file: "+r)):e.responseText}function i(r){return(s.transpiler=s.transpiler||new e(s.lexTableSrc)).transpile(r)}function e(r){this.arrayOfSymbols={},this.lexTable=s.getJSON(r,this.arrayOfSymbols),this.lexArray=[],this.errors=[]}s.lexTableSrc="./config/lex_table.json",s.start=r,s.getFileByXHR=o,s.transpileStart=i,s.Transpiler=e,s.TransProto=s.Transpiler.prototype,s.TransProto.transpile=function(r){var e=this.lexer(r);return console.log(e),r},s.getJSON=function(r,t){var e,n=s.getFileByXHR(r);if(n instanceof Error)throw n;n=n.replace(/\\([^"])/gi,"\\\\$1");try{e=JSON.parse(n,function(r,e){return"regex"==r?new RegExp("^"+e):"link"==r?(e in t||(t[e]={}),t[e]=e):e})}catch(r){throw r}return e},document.addEventListener("DOMContentLoaded",r)}(window.trans||(window.trans={})),(window.trans||(window.trans={})).TransProto.lexer=function(r){var e=this.lexTable;for(var t in this.arrayOfSymbols)this.arrayOfSymbols[t]=[];for(var n=1,s=1;0!=r.length;){var o=!1;for(var i in e){var l=new RegExp(e[i].regex),a=l.exec(r);if(a&&0!=a.length)if(e[i].skip)for(o=!0,r=r.replace(l,""),t=0;t<a[0].length;t++)"\n"==a[0][t]&&(n++,s=-1);else if(e[i].list)for(var f in e[i].list)for(var c in e[i].list[f]){var h=e[i].list[f][c];if(h==a[0]){o=!0,this.lexArray.push([h,n,s]),r=r.replace(l,"");break}}else{var p=this.arrayOfSymbols[e[i].link];for(t=0;t<p.length;t++)if(p[t][1]==a[0]){this.lexArray.push([e[i].link,t]),o=!0;break}o||(p.push([p.length,a[0]]),this.lexArray.push([e[i].link,p.length-1,n,s]),o=!0),r=r.replace(l,"")}if(o){s+=a[0].length;break}}if(!o){console.log("Error in line "+n+", colon "+s),console.log(r);var u=r.split(/\s+/);this.errors.push(u[0],n,s),r=r.replace(u[0],"")}}return{Lexems:this.lexArray,Constants:this.arrayOfSymbols,"Error lexems":this.errors}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYW5zcGlsZXIuY29yZS5qcyIsImxleGVyLmpzIl0sIm5hbWVzIjpbInRyYW5zIiwic3RhcnQiLCJpbnB1dENvZGUiLCJ0eXBlU2NyaXB0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaSIsImxlbmd0aCIsInNyYyIsImdldFNjcmlwdEJ5WEhSIiwidGV4dENvbnRlbnQiLCJjb25zb2xlIiwibG9nIiwidHJhbnNwaWxlU3RhcnQiLCJzY3JpcHRFbGVtIiwicmVzcG9uc2UiLCJnZXRGaWxlQnlYSFIiLCJFcnJvciIsInVybE5hbWUiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwic3RhdHVzIiwiZXJyb3IiLCJyZXNwb25zZVRleHQiLCJ0cmFuc3BpbGVyIiwiVHJhbnNwaWxlciIsImxleFRhYmxlU3JjIiwidHJhbnNwaWxlIiwibGV4VGFibGVQYXRoIiwidGhpcyIsImFycmF5T2ZTeW1ib2xzIiwibGV4VGFibGUiLCJnZXRKU09OIiwibGV4QXJyYXkiLCJlcnJvcnMiLCJUcmFuc1Byb3RvIiwicHJvdG90eXBlIiwibGV4ZXIiLCJmaWxlTmFtZSIsImpzb25PYmoiLCJ0ZXh0SlNPTiIsInJlcGxhY2UiLCJKU09OIiwicGFyc2UiLCJrZXkiLCJ2YWx1ZSIsIlJlZ0V4cCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3aW5kb3ciLCJsZXgiLCJjdXJfc3RyIiwiY3VyX2NvbG9uIiwiZmxhZyIsInJlZyIsInJlZ2V4IiwibWF0Y2giLCJleGVjIiwic2tpcCIsImxpc3QiLCJuYW1lTGlzdCIsInN1Ym5hbWUiLCJuYW1lX2xleCIsInB1c2giLCJjb25zdF90YWIiLCJsaW5rIiwibGV4X2Vycm9yIiwic3BsaXQiLCJMZXhlbXMiLCJDb25zdGFudHMiLCJFcnJvciBsZXhlbXMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEdBR0EsU0FBQUMsSUFHQSxJQUZBLElBQUFDLEVBQUEsR0FDQUMsRUFBQUMsU0FBQUMsaUJBQUEsMkJBQ0FDLEVB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Q0FILEdBQUEsRUFDQXZCLEtBQUFJLFNBQUE2QixNQUFBRCxFQUFBWCxFQUFBQyxJQUNBbkQsRUFBQUEsRUFBQXlDLFFBQUFZLEVBQUEsSUFDQSxXQUlBLENBQ0EsSUFBQVUsRUFBQWxDLEtBQUFDLGVBQUFtQixFQUFBTCxHQUFBb0IsTUFDQSxJQUFBNUQsRUFBQSxFQUFBQSxFQUFBMkQsRUFBQTFELE9BQUFELElBQ0EsR0FBQTJELEVBQUEzRCxHQUFBLElBQUFtRCxFQUFBLEdBQUEsQ0FDQTFCLEtBQUFJLFNBQUE2QixNQUFBYixFQUFBTCxHQUFBb0IsS0FBQTVELElBQ0FnRCxHQUFBLEVBQ0EsTUFHQUEsSUFDQVcsRUFBQUQsTUFBQUMsRUFBQTFELE9BQUFrRCxFQUFBLEtBQ0ExQixLQUFBSSxTQUFBNkIsTUFBQWIsRUFBQUwsR0FBQW9CLEtBQUFELEVBQUExRCxPQUFBLEVBQUE2QyxFQUFBQyxJQUNBQyxHQUFBLEdBRUFwRCxFQUFBQSxFQUFBeUMsUUFBQVksRUFBQSxJQUlBLEdBQUFELEVBQUEsQ0FDQUQsR0FBQUksRUFBQSxHQUFBbEQsT0FFQSxPQUlBLElBQUErQyxFQUFBLENBQ0EzQyxRQUFBQyxJQUFBLGlCQUFBd0MsRUFBQSxXQUFBQyxHQUNBMUMsUUFBQUMsSUFBQVYsR0FFQSxJQUFBaUUsRUFBQWpFLEVBQUFrRSxNQUFBLE9BQ0FyQyxLQUFBSyxPQUFBNEIsS0FBQUcsRUFBQSxHQUFBZixFQUFBQyxHQUNBbkQsRUFBQUEsRUFBQXlDLFFBQUF3QixFQUFBLEdBQUEsS0FHQSxPQUNBRSxPQUFBdEMsS0FBQUksU0FDQW1DLFVBQUF2QyxLQUFBQyxlQUNBdUMsZUFBQXhDLEtBQUFLIiwiZmlsZSI6InRyYW5zcGlsZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICh0cmFucykge1xyXG4gIHRyYW5zLmxleFRhYmxlU3JjID0gJy4vY29uZmlnL2xleF90YWJsZS5qc29uJ1xyXG5cclxuICBmdW5jdGlvbiBzdGFydCgpIHsgICAgXHJcbiAgICB2YXIgaW5wdXRDb2RlID0gJyc7XHJcbiAgICB2YXIgdHlwZVNjcmlwdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdFt0eXBlPVwidGV4dC9waHBcIl0nKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZVNjcmlwdC5sZW5ndGg7IGkrKykgeyBcclxuICAgICAgaWYgKHR5cGVTY3JpcHRbaV0uc3JjKSB7IFxyXG4gICAgICAgIGlucHV0Q29kZSArPSBnZXRTY3JpcHRCeVhIUih0eXBlU2NyaXB0W2ldKTtcclxuICAgICAgfSBlbHNlIHsgXHJcbiAgICAgICAgaW5wdXRDb2RlICs9IGdldFNjcmlwdEJ5VGV4dCh0eXBlU2NyaXB0W2ldKTtcclxuICAgICAgfSAgICBcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKGlucHV0Q29kZSk7XHJcbiAgICB2YXIgZ2VuZXJhdGVkQ29kZSA9IHRyYW5zcGlsZVN0YXJ0KGlucHV0Q29kZSk7IFxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFNjcmlwdEJ5VGV4dChzY3JpcHRFbGVtKSB7XHJcbiAgICAgIHJldHVybiBzY3JpcHRFbGVtLnRleHRDb250ZW50ICsgJzsnO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFNjcmlwdEJ5WEhSKHNjcmlwdEVsZW0pIHtcclxuICAgICAgdmFyIHJlc3BvbnNlID0gZ2V0RmlsZUJ5WEhSKHNjcmlwdEVsZW0uc3JjKTsgXHJcbiAgICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIEVycm9yKSB7IFxyXG4gICAgICB9IGVsc2UgeyBcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UgKyAnOyc7IFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHRyYW5zLnN0YXJ0ID0gc3RhcnQ7IFxyXG5cclxuICBmdW5jdGlvbiBnZXRGaWxlQnlYSFIodXJsTmFtZSkge1xyXG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybE5hbWUsIGZhbHNlKTsgXHJcbiAgICB4aHIuc2VuZCgpOyBcclxuICAgIGlmICh4aHIuc3RhdHVzICE9IDIwMCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiQ2FuJ3QgZ2V0IGZpbGU6IFwiICsgdXJsTmFtZSk7XHJcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoXCJDYW4ndCBnZXQgZmlsZTogXCIgKyB1cmxOYW1lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB4aHIucmVzcG9uc2VUZXh0OyBcclxuICAgIH1cclxuICB9XHJcbiAgdHJhbnMuZ2V0RmlsZUJ5WEhSID0gZ2V0RmlsZUJ5WEhSO1xyXG5cclxuICBmdW5jdGlvbiB0cmFuc3BpbGVTdGFydChpbnB1dENvZGUpIHtcclxuICAgIHZhciB0cmFuc3BpbGVyID0gdHJhbnMudHJhbnNwaWxlciA9IHRyYW5zLnRyYW5zcGlsZXIgfHwgbmV3IFRyYW5zcGlsZXIodHJhbnMubGV4VGFibGVTcmMpO1xyXG4gICAgdmFyIHJlc3VsdENvZGUgPSB0cmFuc3BpbGVyLnRyYW5zcGlsZShpbnB1dENvZGUpO1xyXG4gICAgcmV0dXJuIHJlc3VsdENvZGU7IFxyXG4gIH1cclxuICB0cmFucy50cmFuc3BpbGVTdGFydCA9IHRyYW5zcGlsZVN0YXJ0O1xyXG5cclxuICBmdW5jdGlvbiBUcmFuc3BpbGVyKGxleFRhYmxlUGF0aCkge1xyXG4gICAgdGhpcy5hcnJheU9mU3ltYm9scyA9IHt9OyBcclxuICAgIHRoaXMubGV4VGFibGUgPSB0cmFucy5nZXRKU09OKGxleFRhYmxlUGF0aCwgdGhpcy5hcnJheU9mU3ltYm9scyk7IFxyXG4gICAgdGhpcy5sZXhBcnJheSA9IFtdOyBcclxuICAgIHRoaXMuZXJyb3JzID0gW107IFxyXG4gIH1cclxuICB0cmFucy5UcmFuc3BpbGVyID0gVHJhbnNwaWxlcjsgXHJcbiAgdHJhbnMuVHJhbnNQcm90byA9IHRyYW5zLlRyYW5zcGlsZXIucHJvdG90eXBlOyBcclxuXHJcbiAgdHJhbnMuVHJhbnNQcm90by50cmFuc3BpbGUgPSBmdW5jdGlvbihpbnB1dENvZGUpIHtcclxuICAgIHZhciBsZXhBcnJheSA9IHRoaXMubGV4ZXIoaW5wdXRDb2RlKTsgXHJcbiAgICBjb25zb2xlLmxvZyhsZXhBcnJheSk7XHJcbiAgICByZXR1cm4gaW5wdXRDb2RlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0SlNPTihmaWxlTmFtZSwgYXJyYXlPZlN5bWJvbHMpIHtcclxuICAgIHZhciB0ZXh0SlNPTiA9IHRyYW5zLmdldEZpbGVCeVhIUihmaWxlTmFtZSk7XHJcbiAgICBpZiAodGV4dEpTT04gaW5zdGFuY2VvZiBFcnJvcikgdGhyb3cgdGV4dEpTT047XHJcbiAgICB2YXIganNvbk9iajtcclxuICAgIHRleHRKU09OID0gdGV4dEpTT04ucmVwbGFjZSgvXFxcXChbXlwiXSkvZ2ksIFwiXFxcXFxcXFwkMVwiKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGpzb25PYmogPSBKU09OLnBhcnNlKHRleHRKU09OLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGtleSA9PSAncmVnZXgnKSByZXR1cm4gbmV3IFJlZ0V4cChcIl5cIiArIHZhbHVlKTtcclxuICAgICAgICBpZiAoa2V5ID09ICdsaW5rJykge1xyXG4gICAgICAgICAgaWYgKCEodmFsdWUgaW4gYXJyYXlPZlN5bWJvbHMpKSBhcnJheU9mU3ltYm9sc1t2YWx1ZV0gPSB7fTtcclxuICAgICAgICAgIHJldHVybiBhcnJheU9mU3ltYm9sc1t2YWx1ZV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGpzb25PYmo7XHJcbiAgfVxyXG4gIHRyYW5zLmdldEpTT04gPSBnZXRKU09OO1xyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgc3RhcnQpO1xyXG5cclxufSkod2luZG93LnRyYW5zIHx8ICh3aW5kb3cudHJhbnMgPSB7fSkpOyAiLCIoZnVuY3Rpb24odHJhbnMpIHtcclxuIHRyYW5zLlRyYW5zUHJvdG8ubGV4ZXIgPSBmdW5jdGlvbiAoaW5wdXRDb2RlKSB7XHJcblxyXG4gICB2YXIgbGV4ID0gdGhpcy5sZXhUYWJsZTsgXHJcblxyXG4gICBmb3IodmFyIGkgaW4gdGhpcy5hcnJheU9mU3ltYm9scyl7XHJcbiAgICAgdGhpcy5hcnJheU9mU3ltYm9sc1tpXSA9IFtdO1xyXG4gICB9XHJcblxyXG5cclxuICAgICAgdmFyIGN1cl9zdHIgPSAxOyBcclxuICAgdmFyIGN1cl9jb2xvbiA9IDEgXHJcbiAgIHdoaWxlKGlucHV0Q29kZS5sZW5ndGggIT0gMCl7XHJcblxyXG4gICAgIHZhciBmbGFnID0gZmFsc2U7IFxyXG4gICAgIGZvciggdmFyIGtleSBpbiBsZXgpe1xyXG5cclxuICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKGxleFtrZXldLnJlZ2V4KTtcclxuICAgICAgIHZhciBtYXRjaCA9IHJlZy5leGVjKGlucHV0Q29kZSk7IFxyXG5cclxuICAgICAgIGlmKG1hdGNoICYmIG1hdGNoLmxlbmd0aCAhPSAwKXtcclxuICAgICAgICAgaWYobGV4W2tleV0uc2tpcCl7XHJcbiAgICAgICAgICAgZmxhZyA9dHJ1ZTtcclxuICAgICAgICAgICBpbnB1dENvZGUgPSBpbnB1dENvZGUucmVwbGFjZShyZWcsIFwiXCIpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgIGZvcih2YXIgaT0wOyBpPCBtYXRjaFswXS5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgIGlmKG1hdGNoWzBdW2ldID09IFwiXFxuXCIpe1xyXG4gICAgICAgICAgICAgICBjdXJfc3RyKys7ICAgIFxyXG4gICAgICAgICAgICAgICBjdXJfY29sb249LTE7XHJcblxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICB9ZWxzZSBpZihsZXhba2V5XS5saXN0KXtcclxuICAgICAgICAgICBmb3IoIHZhciBuYW1lTGlzdCBpbiBsZXhba2V5XS5saXN0KXtcclxuICAgICAgICAgICAgIGZvcih2YXIgc3VibmFtZSBpbiBsZXhba2V5XS5saXN0W25hbWVMaXN0XSl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZV9sZXggPSBsZXhba2V5XS5saXN0W25hbWVMaXN0XVtzdWJuYW1lXTtcclxuICAgICAgICAgICAgICAgaWYobmFtZV9sZXggPT0gbWF0Y2hbMF0pe1xyXG4gICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgIHRoaXMubGV4QXJyYXkucHVzaChbbmFtZV9sZXgsIGN1cl9zdHIsIGN1cl9jb2xvbl0pOyBcclxuICAgICAgICAgICAgICAgICBpbnB1dENvZGUgPSBpbnB1dENvZGUucmVwbGFjZShyZWcsIFwiXCIpOyBcclxuICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgfWVsc2V7ICBcclxuICAgICAgICAgICB2YXIgY29uc3RfdGFiID0gdGhpcy5hcnJheU9mU3ltYm9sc1tsZXhba2V5XS5saW5rXTsgXHJcbiAgICAgICAgICAgZm9yKHZhciBpID0wOyBpIDwgY29uc3RfdGFiLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgIGlmKGNvbnN0X3RhYltpXVsxXT09IG1hdGNoWzBdKXsgXHJcbiAgICAgICAgICAgICAgIHRoaXMubGV4QXJyYXkucHVzaChbbGV4W2tleV0ubGluaywgaV0pOyBcclxuICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICBpZighZmxhZyl7XHJcbiAgICAgICAgICAgICBjb25zdF90YWIucHVzaChbY29uc3RfdGFiLmxlbmd0aCwgbWF0Y2hbMF1dKTsgXHJcbiAgICAgICAgICAgICB0aGlzLmxleEFycmF5LnB1c2goW2xleFtrZXldLmxpbmssIGNvbnN0X3RhYi5sZW5ndGgtMSwgIGN1cl9zdHIsIGN1cl9jb2xvbl0pOyBcclxuICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICBpbnB1dENvZGUgPSBpbnB1dENvZGUucmVwbGFjZShyZWcsIFwiXCIpOyBcclxuICAgICAgICAgfVxyXG5cclxuICAgICB9XHJcbiAgICAgaWYoZmxhZyl7XHJcbiAgICAgICBjdXJfY29sb24rPW1hdGNoWzBdLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICBpZighZmxhZyl7XHJcbiAgICAgY29uc29sZS5sb2coXCJFcnJvciBpbiBsaW5lIFwiICsgY3VyX3N0citcIiwgY29sb24gXCIrY3VyX2NvbG9uKTsgXHJcbiAgICAgY29uc29sZS5sb2coaW5wdXRDb2RlKTtcclxuXHJcbiAgICAgdmFyIGxleF9lcnJvciA9IGlucHV0Q29kZS5zcGxpdCgvXFxzKy8pO1xyXG4gICAgIHRoaXMuZXJyb3JzLnB1c2gobGV4X2Vycm9yWzBdLCBjdXJfc3RyLCBjdXJfY29sb24pO1xyXG4gICAgIGlucHV0Q29kZSA9IGlucHV0Q29kZS5yZXBsYWNlKGxleF9lcnJvclswXSwgXCJcIik7XHJcbiAgIH1cclxuIH1cclxuIHJldHVybiB7XHJcbiAgXCJMZXhlbXNcIjogdGhpcy5sZXhBcnJheSxcclxuICBcIkNvbnN0YW50c1wiOiB0aGlzLmFycmF5T2ZTeW1ib2xzLFxyXG4gIFwiRXJyb3IgbGV4ZW1zXCI6IHRoaXMuZXJyb3JzXHJcblxyXG4gfTtcclxufVxyXG5cclxufSkod2luZG93LnRyYW5zIHx8ICh3aW5kb3cudHJhbnMgPSB7fSkpOyJdfQ==
